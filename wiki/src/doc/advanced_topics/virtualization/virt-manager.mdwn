[[!meta title="Virt-manager"]]

<span class="application">Virt-manager</span> is a free software
virtualization solution for Linux. *Virt-manager* has a more complex
interface than *VirtualBox* or *GNOME Boxes* but it also has a more
complete set of features.

<div class="tip">

<span class="application">Virt-manager</span> is the only virtualization
solution that we present that allows the use of a persistent
volume.</span>

</div>

[[!toc]]

Terminology
===========

*Virt-manager* is based on a set of lower level virtualization tools,
going from the user interface to the hardware interactions with the
processor. This terminology is a bit confusing and other documentation
might mention the following tools:

  - *KVM* is the module of the Linux kernel that interacts with the
    virtualization features of the processor.
  - *QEMU* is the virtualization software that emulates virtual
    processors and peripherals based on *KVM* and that starts and stops
    virtual machines.
  - *libvirt* is a library that allows *Virt-manager* to interact with
    the virtualization capabilities provides by *QEMU*.
  - *SPICE* is a protocol that allows to visualize the desktop of
    virtual machines.
  - *Virt-manager* is the graphical interface that allows to create,
    configure, and run virtual machines.

<a id="iso"></a>

Running Tails from an ISO image
===============================

  1. Start *Virt-manager*.
  1. Double-click on **locahost (QEMU)** to connect to the *QEMU*
     system of your host.
  1. To create a new virtual machine, choose
     <span class="menuchoice"> <span
     class="guimenu">File</span>&nbsp;▸ <span
     class="guimenuitem">New Virtual Machine</span></span>.
  1. In *step 1*, choose **Local install media (ISO image or CDROM)**.
  1. In *step 2*, choose:
     - **Use ISO image**, then **Browse...**, and **Browse Local** to
       browse for the ISO image that you want to start from.
     - **OS type**: **Linux**.
     - **Version**: **Debian Wheezy**.
  1. In *step 3*, allocate at least 1024 MB of RAM.
  1. In *step 4*, disable storage for this virtual machine.
  1. In *step 5*:
     - Type a name for the new virtual machine.
     - Click on the **Finish** button to start the virtual machine.

<div class="tip">

If you get the error message "<span class="guilabel">Error starting
domain: Requested operation is not valid: network 'default' is not
active</span>", then try to start the default virtual network:

<ol>
<li>Click on <span class="guilabel">localhost (QEMU)</span>.</li>
<li>Choose <span class="menuchoice">
    <span class="guimenu">Edit</span>&nbsp;▸
    <span class="guimenuitem">Connection details</span></span> to
    administer the connection to your local
    <span class="application">QEMU</span> system.</li>
<li>Click on <span class="guilabel">Virtual Networks</span> tab, then
    select the <span class="guilabel">default</span> virtual network in
    the left pane.</li>
<li>Click on the [[!img media-playback-start.png alt="Start Network"
    link=no class=symbolic]] icon on the bottom of the left pane to
    start the default virtual network.</li>
</ol>

</div>

<a id="usb"></a>

Running Tails from a USB stick or SD card
=========================================

To run Tails from a USB stick or SD card using *Virt-manager*, first
create a virtual machine running from an ISO image as described
[[above|virt-manager#iso]].

Then do the following:

  1. From the virtual machine window, choose
     <span class="menuchoice">
     <span class="guimenu">Virtual Machine</span>&nbsp;▸
     <span class="guisubmenuitem">Shut Down</span>&nbsp;▸
     <span class="guimenuitem">Force Off</span></span> to shut down the
     virtual machine.
  1. Plug in the USB stick or insert the SD card from which you want to
     run Tails.
  1. Choose
     <span class="menuchoice">
     <span class="guimenu">View</span>&nbsp;▸
     <span class="guimenuitem">Details</span></span> to edit the
     configuration of the virtual machine.
  1. Click on the **Add Hardware** button on the bottom of the left
     pane.
  1. Select **USB Host Device** in the left pane.
  1. In the right pane, click on the device from which you want to run
     Tails, and click on the **Finish** button.

You can keep the original ISO image connected as a virtual DVD to
install Tails onto the USB stick or SD card.

You can also disconnect the original ISO image and boot directly from the
USB stick if Tails is already installed on it. To do so:

  1. Shut down the virtual machine.
  1. In the configuration of the virtual machine, click on **IDE CDROM
     1** in the left pane.
  1. Click on the **Disconnect** button in the right pane.
  1. To enable the USB stick or SD card as a boot option:
     1. Click on **Boot Options** in the left pane.
     1. Select the **USB** boot option corresponding to your USB device.
     1. Click on the **Apply** button.
  1. To start the virtual machine choose
     <span class="menuchoice">
     <span class="guimenu">View</span>&nbsp;▸
     <span class="guimenuitem">Console</span></span> and then
     <span class="menuchoice">
     <span class="guimenu">Virtual Machine</span>&nbsp;▸
     <span class="guimenuitem">Run</span></span>.

<a id="virtual_usb"></a>

Running Tails from a virtual USB device
=======================================

1. "View" → "Details"
2. "Add Hardware" → "Storage"
   - "Bus type": USB
3. Click "USB Disk 1" in left pane
   Check "Removable"
